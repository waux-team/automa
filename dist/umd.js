!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Automa=t():e.Automa=t()}(self,(()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.Automa=void 0,t.Automa=class{constructor(e){this.element={},this.debug=!1,this.classArr={},this.classObj={},this.cleanArr=[],this.innerCleanArr=[],(null==e?void 0:e.define)&&this.parseToElement(e.define),(null==e?void 0:e.instruction)&&this.arrange(e.instruction),(null==e?void 0:e.classArr)&&(this.classArr=e.classArr),(null==e?void 0:e.classObj)&&(this.classObj=e.classObj)}root(e){const t=document.getElementById(void 0===e.name?"root":e.name);null==t||t.appendChild(e.child.target)}useOnly(e){let t={};e.map((e=>{t[e]=this.element[e]})),this.element=t}innerClean(e){e.map((e=>{this.element[e]._inner()}))}clone(e){let t=this.buildInElementProps({target:this.element[e].target.cloneNode(!0),propsName:this.element[e].propsName,elType:this.element[e].elType});t._children();for(let s in this.element[e].inner){let n=this.element[e].inner[s].target.cloneNode(!0);t.target.appendChild(n),t.inner[s]=this.buildInElementProps({target:n,propsName:this.element[e].inner[s].propsName,elType:this.element[e].inner[s].elType})}return t}regis(e){this.element[e.elName]=e.component}defineClassArray(e){this.classArr=e}defineClassObject(e){this.classObj=e}arrange(e){e.map((e=>{let t=e.replace(/\s+/g,""),s=t.split("="),n=1===s[0].split("-").length?s[0]:s[0].split("-"),i="",r=n;"string"!=typeof n&&(i=n[0],r=n[1]),"u"===i&&this.cleanArr.push(r),"ui"===i&&(this.innerCleanArr.push(r),this.cleanArr.push(r)),s[1].split(",").map((e=>{this.pick(r).children([this.pick(e)])})),this.debug&&console.log(t)}))}clean(){this.innerClean(this.innerCleanArr),this.useOnly(this.cleanArr)}parseToElement(e){e.slice().map((e=>{const{propsName:t,className:s,elType:n}=this.parseToCarmelCase(e);let i=document.createElement(n);i.classList.add(s),this.element[t]=this.buildInElementProps({target:i,propsName:t,elType:n}),Object.assign(this.element[t],{class_a:e=>{let t=this.classArr[e],s=this.classObj[e],n=t?"array":s?"object":null;return n&&("array"===n?i.classList.add(...t):Object.assign(i.style,s)),this}})}))}parseToCarmelCase(e){let t=e.split("-"),s=t.splice(t.length-1,1),n="";for(let e in t)0===Number(e)?n+=t[e].charAt(0).toLowerCase()+t[e].slice(1):n+=t[e].charAt(0).toUpperCase()+t[e].slice(1);return{propsName:n,className:t.join("-"),elType:s[0]}}isUndefined(e,t){return void 0===e?t:e}buildInElementProps(e){return{target:this.isUndefined(e.target,null),propsName:this.isUndefined(e.propsName,null),elType:this.isUndefined(e.elType,null),inner:this.isUndefined(e.inner,{}),pick:this.isUndefined(e.pick,null),_inner:function(){return this.inner={},this},modify:function(e){return e(this.target,this),this},text:function(e){return this.target.textContent=e,this},children:function(e){return e.map((e=>{this.target.appendChild(e.target),this.inner[e.propsName]=e})),this},_children:function(){return this.target.innerHTML="",this},style:function(e){return Object.assign(this.target.style,e),this},_style:function(){return this.attr("style",""),this},class:function(e){return this.target.classList.add(...e),this},_class:function(){return this.attr("class",""),this},action:function(e,t){return this.target.addEventListener(e,t,!0),this},_action:function(e,t){return this.target.remiveEventListener(e,t,!0),this},relationship:function(){let e=this.propsName+"<"+this.elType+">=";for(let t in this.inner)e+=","+this.inner[t].propsName+"<"+this.inner[t].elType+">";return e.replace("=,","=")},attr:function(e,t){return this.target.setAttribute(e,t),this}}}pick(e){return this.element[e]}component(e){let t=this.buildInElementProps({});if(void 0!==e.el){let{propsName:s,className:n,elType:i}=this.parseToCarmelCase(e.el),r=document.createElement(i);r.classList.add(n),t.target=r,t.propsName=s,t.elType=i}return void 0!==e.pick&&(t=e.pick),void 0!==e.text&&t.text(e.text),void 0!==e.class&&t.class(e.class),void 0!==e.children&&t.children(e.children),void 0!==e.build&&t.modify(e.build),t}debugOn(){this.debug=!0}}})(),e})()));